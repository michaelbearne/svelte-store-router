{#if result && show}
  <slot params={result.params} />
{/if}

<script>
  import { getContext } from 'svelte'
  import match from 'functions/match'
  import { key as key_matcher } from 'components/Matcher.svelte'

  export let path
  export let pattern = '(.*)'
  
  const key = {}
  const { register } = getContext(key_matcher) || {}
  let show = false

  $: result = match(pattern, path)

  $: {
    if (register) {
      register(key, {
        result,
        show: () => show = true,
        hide: () => show = false
      })
    } else {
      show = true
    }
  }
</script>